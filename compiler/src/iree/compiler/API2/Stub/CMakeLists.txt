################################################################################
# Autogenerated by build_tools/bazel_to_cmake/bazel_to_cmake.py from           #
# compiler/src/iree/compiler/API2/Stub/BUILD                                   #
#                                                                              #
# Use iree_cmake_extra_content from iree/build_defs.oss.bzl to add arbitrary   #
# CMake-only content.                                                          #
#                                                                              #
# To disable autogeneration for this file entirely, delete this header.        #
################################################################################

iree_add_all_subdirs()

iree_cc_library(
  NAME
    Stub
  HDRS
    "Loader.h"
  SRCS
    "HandleSymbols.inc"
    "Loader.cpp"
  DEPS
    ${CMAKE_DL_LIBS}
    iree::compiler::API2::Headers
  PUBLIC
)

### BAZEL_TO_CMAKE_PRESERVES_ALL_CONTENT_BELOW_THIS_LINE ###

# TODO: Make this test work with Bazel once that is more solid.

iree_cc_test(
  NAME
    LoaderTest
  SRCS
    "LoaderTest.cpp"
  ARGS
    "$<TARGET_FILE:iree::compiler::API2::SharedImpl>"
  DEPS
    iree::compiler::API2::Stub
)

# Must be a build dependency but not a library dep (we depend on it at
# runtime).
# TODO: Find a better way to do this.
if(IREE_BUILD_TESTS)
  add_dependencies(
    iree_compiler_API2_Stub_LoaderTest
    iree::compiler::API2::SharedImpl)
endif()
